SET FOREIGN_KEY_CHECKS = 0;
DROP SCHEMA IF EXISTS `STUDENTI` ;
CREATE SCHEMA IF NOT EXISTS `STUDENTI` ;
CREATE TABLE IF NOT EXISTS `STUDENTI`.`MATERIEPROFESOR` (
  `CNP` CHAR(13) NULL,
  `MATERIE` char(30) NULL,
  CONSTRAINT `PROFESORIMATERIEPROFESOR`
    FOREIGN KEY (`CNP`)
    REFERENCES `STUDENTI`.`PROFESORI` (`CNP`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `MATERIIMATERIEPROFESOR`
    FOREIGN KEY (`MATERIE`)
    REFERENCES `STUDENTI`.`MATERII` (`MATERIE`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS `STUDENTI`.`PROFESORMATERIECLASA` (
  `CNP` CHAR(13) NULL,
  `MATERIE` CHAR(30) NULL,
  `CLASA` CHAR(4) NULL,
  CONSTRAINT `PROFESORIPROFESORMATERIECLASA`
    FOREIGN KEY (`CNP`)
    REFERENCES `STUDENTI`.`PROFESORI` (`CNP`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `CLASEPROFESORMATERIECLASA`
    FOREIGN KEY (`CLASA`)
    REFERENCES `STUDENTI`.`CLASE` (`CLASA`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `MATERIIPROFESORMATERIECLASA`
    FOREIGN KEY (`MATERIE`)
    REFERENCES `STUDENTI`.`MATERII` (`MATERIE`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS `STUDENTI`.`MATERII` (
  `MATERIE` CHAR(30) NOT NULL,
  INDEX `MATERIIMATERIE` (`MATERIE` ASC),
  PRIMARY KEY (`MATERIE`));
CREATE TABLE IF NOT EXISTS `STUDENTI`.`CLASE` (
  `CLASA` CHAR(4) NOT NULL,
  PRIMARY KEY (`CLASA`),
  INDEX `CLASECLASA` (`CLASA` ASC));
CREATE TABLE IF NOT EXISTS `STUDENTI`.`NOTE` (
  `CNP` CHAR(13) NULL,
  `MATERIE` CHAR(30) NULL,
  `NOTA` CHAR(2) NULL,
  `DATANOTA` CHAR(8) NULL,
  CONSTRAINT `STUDENTINOTE`
    FOREIGN KEY (`CNP`)
    REFERENCES `STUDENTI`.`STUDENTI` (`CNP`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `MATERIINOTE`
    FOREIGN KEY (`MATERIE`)
    REFERENCES `STUDENTI`.`MATERII` (`MATERIE`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS `STUDENTI`.`STUDENTI` (
  `CNP` CHAR(13) NOT NULL,
  `NUME` CHAR(30) NULL,
  `PRENUME` CHAR(30) NULL,
  `CLASA` CHAR(4) NULL,
-- FORMAT: AAAALLZZ
  `DATANASTERII` CHAR(8) NULL,
  `SEX` CHAR(1) NULL,
  PRIMARY KEY (`CNP`),
  CONSTRAINT `CLASESTUDENTI`
    FOREIGN KEY (`CLASA`)
    REFERENCES `STUDENTI`.`CLASE` (`CLASA`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS `STUDENTI`.`PROFESORI` (
  `CNP` CHAR(13) NOT NULL,
  `NUME` CHAR(30) NULL,
  `PRENUME` CHAR(30) NULL,
  `DATANASTERII` CHAR(8) NULL,
  `SEX` CHAR(1) NULL,
  INDEX `PROFESORICNP` (`CNP` ASC),
  INDEX `NUME` (`NUME` ASC),
  PRIMARY KEY (`CNP`));
SET FOREIGN_KEY_CHECKS = 1;
